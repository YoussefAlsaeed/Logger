<source>
  @type kafka
  brokers kafka-cntr:9092
  topics SOURCE_A,SOURCE_B,SOURCE_C
  format json
</source>

<match SOURCE_A>
  @type copy
  <store>
    @type stdout
  </store>
  <store>
    @type elasticsearch
    host elasticsearch
    port 9200
    index_name fluentd_SOURCE_A
	#flush_interval 1s
  </store>
</match>

<match SOURCE_B>
  @type copy
  <store>
    @type stdout
  </store>
  <store>
    @type elasticsearch
    host elasticsearch
    port 9200
    index_name fluentd_SOURCE_B
	#flush_interval 1s
  </store>
</match>

<match SOURCE_C>
  @type copy
  <store>
    @type stdout
  </store>
  <store>
    @type elasticsearch
    host elasticsearch
    port 9200
    index_name fluentd_SOURCE_C
	#flush_interval 1s
  </store>
</match>


#<filter kafka_to_elasticsearch>
#  @type rewrite_tag_filter
#  <rule>
#    key source
#    pattern .+
#    tag kafka_to_elasticsearch.${tag}
#  </rule>
#</filter>

#<match kafka_to_elasticsearch.*>
#  @type elasticsearch
#  host elasticsearch
#  port 9200
#  index_name "kafka_to_elasticsearch.{{source}}-logs-{{event_time.strftime('%Y.%m.%d')}}"
#</match>
